<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://java.sun.com/jsf/composite"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:pe="http://primefaces.org/ui/extensions"
      xmlns:p="http://primefaces.org/ui"
      xmlns:SBComp="http://xmlns.jcp.org/jsf/composite/SBComp"
      xmlns:h="http://xmlns.jcp.org/jsf/html">


    <!-- INTERFACE -->
    <cc:interface>


        <cc:attribute name="registro" required="true" type="com.super_bits.modulosSB.SBCore.InfoCampos.campo.ItfCampoInstanciado" />
        <cc:attribute name="pid" default="componenteInputDado" />
        <cc:attribute name="tipoExibicaoCampo" default="#{tipos.tipoVisualCampo.padrao}" />
        <cc:attribute name="desabilitarEdicao" type="java.lang.Boolean" default="#{false}" />
        <cc:attribute name="mostrarErro" type="java.lang.Boolean" default="#{false}" />
        <cc:attribute name="idAtualizarAoSair"  default="#{null}" />
        <cc:attribute name="campoLocalizacaoCEP"  />
        <cc:attribute name="metodoExecutarAoAlterarValor" method-signature="void listener()" required="false" />
        <cc:attribute name="modoDebug" default="#{false}" shortDescription="Exibe o campo em modo debug.." expert="#{true}" />

    </cc:interface>
    <!-- IMPLEMENTATION -->
    <cc:implementation>


        <c:set var="idcompInput" value="#{cc.attrs.pid}"/>
        <c:set var="exibicaoPadrao" value="#{false}" />



        <c:choose >
            <c:when test="#{cc.getValueExpression('metodoExecutarAoAlterarValor') ne null}">
                <c:set var="possuiMetodo" value="#{true}"/>
            </c:when>
            <c:otherwise>
                <c:set var="possuiMetodo" value="#{false}"/>
            </c:otherwise>
        </c:choose>

        <c:choose >
            <c:when test="#{cc.getValueExpression('idAtualizarAoSair') ne null}">
                <c:set var="possuiIDAtualizacao" value="#{true}"/>
            </c:when>
            <c:otherwise>
                <c:set var="possuiIDAtualizacao" value="#{false}"/>
            </c:otherwise>
        </c:choose>


        <c:if test="#{!cc.attrs.modoDebug}" >



            <pe:switch  value="#{cc.attrs.registro.tipoCampo.strTipoInputCampo}" >
                <pe:case value="#{tipos.tipoCampo.TEXTO_SIMPLES}" id="cp#{tipos.tipoCampo.TEXTO_SIMPLES}" >


                    <c:if test="#{cc.attrs.registro.temMascara}">


                        <p:inputMask class="campoResponsivo  TexAlCenter"  mask="#{cc.attrs.registro.mascaraJqueryMode}" id="#{idcompInput}"  value="#{cc.attrs.registro.valor}"  required="#{cc.attrs.registro.obrigatorio}"  disabled="#{cc.attrs.desabilitarEdicao}"  >

                        </p:inputMask>

                    </c:if>

                    <c:if test="#{!cc.attrs.registro.temMascara}">
                        <p:inputText  class="campoResponsivo  TexAlCenter" id="#{idcompInput}"  value="#{cc.attrs.registro.valor}"  required="#{cc.attrs.registro.obrigatorio}"  disabled="#{cc.attrs.desabilitarEdicao}" >



                        </p:inputText>
                    </c:if>


                </pe:case>
            </pe:switch>



            <pe:switch  value="#{cc.attrs.registro.tipoCampo.strTipoInputCampo}" rendered="#{tipos.tipoCampo.TEXTO_SIMPLES!=cc.attrs.registro.tipoCampo.strTipoInputCampo}" >

                <pe:case value="#{tipos.tipoCampo.DATA}" id="cp#{tipos.tipoCampo.DATA}" >
                    <p:calendar id="#{idcompInput}" value="#{cc.attrs.registro.valor}"  />
                </pe:case>


                <pe:case value="#{tipos.tipoCampo.PERCENTUA}" id="cp#{tipos.tipoCampo.PERCENTUA}">

                    <h:outputText id="output" value="#{cc.attrs.registro.valor}%" />

                    <h:inputHidden id="#{idcompInput}" value="#{cc.attrs.registro.valor}" />

                    <p:slider for="#{idcompInput}" display="output" style="width: 200px" displayTemplate=" {value}%" />

                </pe:case>


                <pe:case value="#{tipos.tipoCampo.LOOKUP}" id="cp#{tipos.tipoCampo.LOOKUP}" >

                    <SBComp:seletorItem label="#{cc.attrs.registro.label}"
                                        id="#{idcompInput}"
                                        TIPO_VIEW_COMBO="true"
                                        registro="#{cc.attrs.registro.valor}"
                                        lista="#{cc.attrs.registro.listaDeOpcoes}"
                                        desabilitarEdicao="#{cc.attrs.desabilitarEdicao}"
                                        obrigatorio="#{cc.attrs.registro.obrigatorio}"
                                        mostrarMensagemValidacao="#{true}" />
                </pe:case>

                <pe:case value="#{tipos.tipoCampo.EMAIL}" id="cp#{tipos.tipoCampo.EMAIL}" >
                    <c:set var="exibicaoPadrao" value="#{false}"  />
                    <p:inputText  class="campoResponsivo TexAlCenter"  autocomplete="false" id="#{idcompInput}"
                                  validatorMessage="E-mail Inválido" value="#{cc.attrs.registro.valor}"
                                  required="#{cc.attrs.registro.obrigatorio}"
                                  disabled="#{cc.attrs.desabilitarEdicao}">
                        <c:if test="#{cc.attrs.registro.temValidacaoRegex}">
                            <f:validateRegex pattern="#{cc.attrs.registro.validacaoRegex}"/>
                        </c:if>
                        <c:if test="#{cc.attrs.registro.temValidacaoMaximo}">
                            <f:validateLength maximum="#{cc.attrs.registro}"  />
                        </c:if>
                        <c:if test="#{cc.attrs.registro.temValidacaoMinimo}">
                            <f:validateLength minimum="#{cc.attrs.registro.valorMinimo}" />
                        </c:if>
                    </p:inputText>
                </pe:case>

                <pe:case value="#{tipos.tipoCampo.LCCEP}" id="cp#{tipos.tipoCampo.LCCEP}" >

                    <p:inputMask class="campoResponsivo TexAlCenter"
                                 id="#{idcompInput}"
                                 value="#{cc.attrs.registro.valor}"
                                 mask="#{cc.attrs.registro.mascaraJqueryMode}"
                                 required="#{cc.attrs.registro.obrigatorio}"
                                 disabled="#{cc.attrs.desabilitarEdicao}"
                                 >

                        <c:if test="#{cc.attrs.registro.temValidacaoRegex}">

                            <f:validateRegex pattern="#{cc.attrs.registro.validacaoRegex}"/>

                        </c:if>

                        <c:if test="#{cc.attrs.registro.temValidacaoMaximo}">

                            <f:validateLength maximum="#{cc.attrs.registro}"  />

                        </c:if>

                        <c:if test="#{cc.attrs.registro.temValidacaoMinimo}">

                            <f:validateLength minimum="#{cc.attrs.registro.valorMinimo}" />

                        </c:if>
                        <c:if test="#{cc.attrs.campoLocalizacaoCEP!=null}" >

                            <p:ajax event="valueChange"
                                    partialSubmit="true"
                                    process="@this"
                                    listener="#{pgUtil.preencherEndereco(cc.attrs.registro.valor, cc.attrs.campoLocalizacaoCEP)}"
                                    update="#{pgUtil.makeCaminhoCompletoID('endereco')}" />


                        </c:if>

                    </p:inputMask>

                    <p:ajaxStatus style="width:32px;height:32px;position:fixed;right:7px;bottom:7px">

                        <f:facet name="start">

                            <p:graphicImage name="images/preloader.gif" library="adamantium-layout"/>

                        </f:facet>

                        <f:facet name="complete">

                        </f:facet>

                    </p:ajaxStatus>


                </pe:case>

                <pe:case value="#{tipos.tipoCampo.COR}" id="cp#{tipos.tipoCampo.COR}"  >
                    <p:colorPicker id="#{idcompInput}" value="#{cc.attrs.registro.valor}"   />
                </pe:case>

                <pe:case value="#{tipos.tipoCampo.verdadeiroFalso}" id="cp#{tipos.tipoCampo.verdadeiroFalso}" >
                    <p:selectBooleanCheckbox  id="#{idcompInput}" value="#{cc.attrs.registro.valor}" />
                </pe:case>

                <pe:case value="#{tipos.tipoCampo.HTML}">
                    <pe:ckEditor id="#{idcompInput}"
                                 required="true"
                                 value="#{pgEditarComponente.beanExemplo.getCampoByNomeOuAnotacao(pgEditarComponente.campoSelecionado.caminhoSemNomeClasse).valor}"

                                 >
                    </pe:ckEditor>
                </pe:case>

                <pe:case value="#{tipos.tipoCampo.QUANTIDADE}" id="cp#{tipos.tipoCampo.QUANTIDADE}"  >
                    <p:spinner id="#{idcompInput}"
                               required="#{cc.attrs.registro.obrigatorio}"
                               disabled="#{cc.attrs.desabilitarEdicao}"
                               value="#{cc.attrs.registro.valor}"

                               >

                    </p:spinner>
                </pe:case>

                <pe:case value="#{tipos.tipoCampo.descritivo}" id="cp#{tipos.tipoCampo.descritivo}" >
                    <p:inputTextarea   styleClass="campoResponsivo"
                                       rows="2" id="#{idcompInput}"
                                       value="#{cc.attrs.registro.valor}"
                                       required="#{cc.attrs.registro.obrigatorio}" disabled="#{cc.attrs.desabilitarEdicao}" />
                </pe:case>

                <pe:case value="#{tipos.tipoCampo.MOEDAReal}" id="cp#{tipos.tipoCampo.MOEDAReal}">
                    <p:inputText  class="campoResponsivo  TexAlCenter" id="#{idcompInput}"  value="#{cc.attrs.registro.valor}"  required="#{cc.attrs.registro.obrigatorio}"  disabled="#{cc.attrs.desabilitarEdicao}" />

                </pe:case>



                <pe:case value="#{tipos.tipoCampo.senha}" id="cp#{tipos.tipoCampo.senha}"  >
                    <p:password  class="campoResponsivo  TexAlCenter"  id="#{idcompInput}" value="#{cc.attrs.registro.valor}"
                                 autocomplete="false"
                                 redisplay="true"
                                 feedback="true"
                                 disabled="#{cc.attrs.desabilitarEdicao}"
                                 validatorMessage="A senha precisa conter 6 caractéres"
                                 promptLabel="Digite uma senha segura" weakLabel="Você pode melhorar esta senha"
                                 required="#{cc.attrs.registro.obrigatorio}"
                                 goodLabel="Esta senha é uma boa senha, você pode melhora-la adcionando numeros, caracteres especiais e letras" strongLabel="Parabéns, esta senha é muito difícil de ser quebrada" >
                        <f:validateLength minimum="6" />
                    </p:password>
                </pe:case>

            </pe:switch>



        </c:if>


        <c:if test="#{cc.attrs.modoDebug}"  >
            <pe:switch id="inputTipos" value="#{cc.attrs.registro.tipoCampo.strTipoInputCampo}"  >
                <pe:defaultCase  id="cp#{cc.attrs.registro.tipoCampo.strTipoInputCampo}" >
                    <p:outputLabel id ="#{idcompInput}" value="#{component.clientId}"/><br/>
                </pe:defaultCase>

            </pe:switch>


        </c:if>

    </cc:implementation>
</html>










